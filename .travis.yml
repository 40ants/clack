language: common-lisp

env:
  matrix:
    - LISP=sbcl

before_install:
  # libuv for Wookie
  - sudo apt-add-repository -y ppa:linuxjedi/ppa
  - sudo apt-get update -qq
  - sudo apt-get -y install libuv-dev

install:
  # Install cl-travis
  - curl https://raw.githubusercontent.com/luismbo/cl-travis/master/install.sh | bash

script:
  - cl -l prove
       -e '(or (every (function identity)
                      (list (prove:run :t-clack)
                            (prove:run :t-clack-middleware-csrf)))
               (uiop:quit -1))'
